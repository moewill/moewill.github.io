<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Job Board - Maurice Rashad</title>
    
    <!-- External CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    
    <!-- Tailwind Configuration -->
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        primary: '#0EA5E9',
                        secondary: '#0F172A',
                        accent: '#06B6D4',
                        success: '#10B981',
                        warning: '#F59E0B',
                    },
                    animation: {
                        'fade-in-up': 'fadeInUp 0.6s ease-out',
                        'slide-in-left': 'slideInLeft 0.8s ease-out',
                        'slide-in-right': 'slideInRight 0.8s ease-out',
                        'pulse-slow': 'pulse 3s infinite',
                        'bounce-slow': 'bounce 2s infinite',
                    },
                    keyframes: {
                        fadeInUp: {
                            '0%': { opacity: '0', transform: 'translateY(30px)' },
                            '100%': { opacity: '1', transform: 'translateY(0)' },
                        },
                        slideInLeft: {
                            '0%': { opacity: '0', transform: 'translateX(-50px)' },
                            '100%': { opacity: '1', transform: 'translateX(0)' },
                        },
                        slideInRight: {
                            '0%': { opacity: '0', transform: 'translateX(50px)' },
                            '100%': { opacity: '1', transform: 'translateX(0)' },
                        },
                    }
                }
            }
        }
    </script>
    
    <style>
        .gradient-text {
            background: linear-gradient(135deg, #0EA5E9, #06B6D4);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }
        .cta-button {
            background: linear-gradient(135deg, #0EA5E9, #06B6D4);
        }
        .cta-button:hover {
            background: linear-gradient(135deg, #0284C7, #0891B2);
        }
    </style>
</head>
<body class="bg-gray-50">
    
    <!-- Navigation -->
    <nav class="fixed top-0 w-full bg-white/90 backdrop-blur-md z-50 shadow-lg">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="flex justify-between items-center h-16">
                <div class="flex items-center">
                    <a href="/" class="text-2xl font-bold gradient-text">Maurice Rashad</a>
                </div>
                <div class="hidden md:block">
                    <div class="ml-10 flex items-baseline space-x-8">
                        <a href="/#services" class="text-gray-700 hover:text-primary transition-colors duration-300">Services</a>
                        <a href="/#about" class="text-gray-700 hover:text-primary transition-colors duration-300">About</a>
                        <a href="/job-board/" class="text-primary font-medium">Job Board</a>
                        <a href="/#contact" class="text-gray-700 hover:text-primary transition-colors duration-300">Contact</a>
                        <a href="/#contact" class="cta-button text-white px-6 py-2 rounded-full text-sm font-medium">Get Started</a>
                    </div>
                </div>
                <div class="md:hidden">
                    <button id="mobile-menu-button" 
                            class="text-gray-700 hover:text-primary" 
                            aria-label="Toggle mobile menu"
                            aria-expanded="false"
                            aria-controls="mobile-menu">
                        <i class="fas fa-bars text-xl"></i>
                    </button>
                </div>
            </div>
        </div>
        
        <!-- Mobile Menu Dropdown -->
        <div id="mobile-menu" class="md:hidden hidden bg-white/95 backdrop-blur-md border-t border-gray-200">
            <div class="px-4 py-4 space-y-4">
                <a href="/#services" class="block text-gray-700 hover:text-primary transition-colors duration-300 py-2">Services</a>
                <a href="/#about" class="block text-gray-700 hover:text-primary transition-colors duration-300 py-2">About</a>
                <a href="/job-board/" class="block text-primary font-medium py-2">Job Board</a>
                <a href="/#contact" class="block text-gray-700 hover:text-primary transition-colors duration-300 py-2">Contact</a>
                <a href="/#contact" class="block cta-button text-white px-6 py-3 rounded-full text-sm font-medium text-center mt-4">Get Started</a>
            </div>
        </div>
    </nav>

    <!-- Main Content -->
    <main class="pt-20 min-h-screen">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8">
            <!-- Header Section -->
            <div class="text-center mb-8">
                <h1 class="text-4xl font-bold text-gray-900 mb-4">Active Job Board</h1>
                <p class="text-lg text-gray-600 max-w-3xl mx-auto">
                    Fresh job opportunities updated daily. See how long each job has been active to prioritize your applications.
                </p>
            </div>

            <!-- Job Count Display -->
            <div id="job-count" class="text-center mb-6 hidden">
                <p class="text-gray-700 font-medium"></p>
            </div>

            <!-- Loading Indicator -->
            <div id="loading-indicator" class="text-center py-12">
                <div class="inline-flex items-center px-4 py-2 text-gray-600">
                    <svg class="animate-spin -ml-1 mr-3 h-5 w-5 text-primary" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24">
                        <circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle>
                        <path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path>
                    </svg>
                    Loading job listings...
                </div>
            </div>

            <!-- Error Message Container -->
            <div id="error-message" class="hidden bg-red-50 border border-red-200 rounded-lg p-6 mb-6">
                <div class="flex items-center">
                    <i class="fas fa-exclamation-triangle text-red-500 mr-3"></i>
                    <div>
                        <h3 class="text-red-800 font-medium">Unable to load job listings</h3>
                        <p class="text-red-600 mt-1">Please try refreshing the page or contact support if the problem persists.</p>
                    </div>
                </div>
            </div>

            <!-- No Jobs Message -->
            <div id="no-jobs-message" class="hidden text-center py-12">
                <div class="bg-gray-100 rounded-lg p-8">
                    <i class="fas fa-briefcase text-gray-400 text-4xl mb-4"></i>
                    <h3 class="text-xl font-medium text-gray-700 mb-2">No active jobs today</h3>
                    <p class="text-gray-500">Check back tomorrow for new opportunities!</p>
                </div>
            </div>

            <!-- Jobs Container -->
            <div id="jobs-container" class="grid gap-6 md:grid-cols-2 lg:grid-cols-3">
                <!-- Job cards will be dynamically inserted here -->
            </div>
        </div>
    </main>

    <script>
        // Mobile menu toggle functionality
        document.getElementById('mobile-menu-button').addEventListener('click', function() {
            const mobileMenu = document.getElementById('mobile-menu');
            const button = this;
            const isExpanded = button.getAttribute('aria-expanded') === 'true';
            
            mobileMenu.classList.toggle('hidden');
            button.setAttribute('aria-expanded', !isExpanded);
        });

        // Job Board Application Logic
        class JobBoard {
            constructor() {
                this.jobs = [];
                this.currentDate = new Date();
                this.init();
            }

            async init() {
                try {
                    await this.loadJobs();
                    this.processAndDisplayJobs();
                } catch (error) {
                    this.showError();
                } finally {
                    this.hideLoading();
                }
            }

            async loadJobs() {
                const response = await fetch('./fake_jobs.csv');
                if (!response.ok) {
                    throw new Error('Failed to load CSV file');
                }
                const csvText = await response.text();
                this.jobs = this.parseCSV(csvText);
            }

            parseCSV(csvText) {
                const lines = csvText.trim().split('\n');
                if (lines.length < 2) return [];
                
                const headers = lines[0].split(',').map(h => h.trim());
                const jobs = [];
                
                for (let i = 1; i < lines.length; i++) {
                    const values = lines[i].split(',').map(v => v.trim());
                    const job = {};
                    
                    headers.forEach((header, index) => {
                        job[header] = values[index] || '';
                    });
                    
                    jobs.push(job);
                }
                
                return jobs;
            }

            processAndDisplayJobs() {
                // Filter active jobs (matching current date)
                const activeJobs = this.filterActiveJobs(this.jobs);
                
                if (activeJobs.length === 0) {
                    this.showNoJobs();
                    return;
                }

                // Calculate days active and add metadata
                const jobsWithMetadata = activeJobs.map(job => ({
                    ...job,
                    daysActive: this.calculateDaysActive(job.date),
                    ageCategory: this.getAgeCategory(this.calculateDaysActive(job.date))
                }));

                // Sort by days active (newest first - 0 days at top)
                const sortedJobs = jobsWithMetadata.sort((a, b) => a.daysActive - b.daysActive);

                // Display jobs and count
                this.displayJobs(sortedJobs);
                this.showJobCount(sortedJobs.length);
            }

            filterActiveJobs(jobs) {
                const today = this.formatDate(this.currentDate);
                return jobs.filter(job => job.date === today);
            }

            calculateDaysActive(firstSeenDate) {
                const firstDate = new Date(firstSeenDate);
                const diffTime = this.currentDate - firstDate;
                return Math.floor(diffTime / (1000 * 60 * 60 * 24));
            }

            getAgeCategory(daysActive) {
                if (daysActive <= 2) return 'fresh';
                if (daysActive <= 6) return 'recent';
                if (daysActive <= 13) return 'week-old';
                if (daysActive <= 29) return 'old';
                return 'stale';
            }

            getJobAgeStyles(ageCategory) {
                const styles = {
                    fresh: 'border-gray-200 bg-white',
                    recent: 'border-yellow-400 bg-yellow-50',
                    'week-old': 'border-orange-400 bg-orange-50',
                    old: 'border-red-400 bg-red-50',
                    stale: 'border-gray-300 bg-gray-100 opacity-60'
                };
                return styles[ageCategory] || styles.fresh;
            }

            getJobAgeTextStyles(ageCategory) {
                const styles = {
                    fresh: 'text-gray-700',
                    recent: 'text-yellow-700',
                    'week-old': 'text-orange-700',
                    old: 'text-red-700',
                    stale: 'text-gray-400'
                };
                return styles[ageCategory] || styles.fresh;
            }

            displayJobs(jobs) {
                const container = document.getElementById('jobs-container');
                container.innerHTML = '';

                jobs.forEach(job => {
                    const jobCard = this.createJobCard(job);
                    container.appendChild(jobCard);
                });
            }

            createJobCard(job) {
                const card = document.createElement('div');
                const cardStyles = this.getJobAgeStyles(job.ageCategory);
                const textStyles = this.getJobAgeTextStyles(job.ageCategory);
                
                card.className = `border-2 rounded-lg p-6 hover:shadow-lg transition-shadow duration-300 ${cardStyles}`;
                
                // Build job fields HTML
                const fieldsHTML = Object.entries(job)
                    .filter(([key]) => !['daysActive', 'ageCategory'].includes(key))
                    .map(([key, value]) => {
                        if (key === 'title') {
                            return `<h3 class="text-xl font-semibold mb-3 ${textStyles}">
                                <a href="${job.url || '#'}" class="hover:text-primary transition-colors duration-200" target="_self">
                                    ${value}
                                </a>
                            </h3>`;
                        } else if (key === 'url') {
                            return ''; // URL is handled in title
                        } else {
                            const fieldLabel = key.charAt(0).toUpperCase() + key.slice(1);
                            return `<p class="text-sm ${textStyles} mb-2">
                                <span class="font-medium">${fieldLabel}:</span> ${value}
                            </p>`;
                        }
                    })
                    .join('');

                // Days active badge
                const daysText = job.daysActive === 0 ? 'New today!' : 
                                job.daysActive === 1 ? '1 day active' : 
                                `${job.daysActive} days active`;
                
                const badgeColor = job.ageCategory === 'fresh' ? 'bg-green-100 text-green-800' :
                                 job.ageCategory === 'recent' ? 'bg-yellow-100 text-yellow-800' :
                                 job.ageCategory === 'week-old' ? 'bg-orange-100 text-orange-800' :
                                 job.ageCategory === 'old' ? 'bg-red-100 text-red-800' :
                                 'bg-gray-100 text-gray-600';

                card.innerHTML = `
                    ${fieldsHTML}
                    <div class="mt-4 pt-3 border-t border-gray-200">
                        <span class="inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${badgeColor}">
                            <i class="fas fa-clock mr-1"></i>
                            ${daysText}
                        </span>
                    </div>
                `;

                return card;
            }

            showJobCount(count) {
                const jobCountEl = document.getElementById('job-count');
                jobCountEl.querySelector('p').textContent = `Showing ${count} active job${count !== 1 ? 's' : ''}`;
                jobCountEl.classList.remove('hidden');
            }

            showError() {
                document.getElementById('error-message').classList.remove('hidden');
            }

            showNoJobs() {
                document.getElementById('no-jobs-message').classList.remove('hidden');
            }

            hideLoading() {
                document.getElementById('loading-indicator').classList.add('hidden');
            }

            formatDate(date) {
                return date.toISOString().split('T')[0];
            }
        }

        // Initialize the job board when the page loads
        document.addEventListener('DOMContentLoaded', () => {
            new JobBoard();
        });
    </script>
</body>
</html>